<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scusa Amore ü©µ</title>
  <link rel="preload" href="IMG_3057.jpg" as="image">
  <style>
    :root {
      /* Perplexity Design System */
      --color-bg-1: #FFB6C1;
      --color-bg-2: #FF69B4;
      --color-bg-3: #FF7F50;
      --color-bg-4: #E6E6FA;
      --color-white: #FFFFFF;
      /* Font */
      --romantic-font: 'FKGroteskNeue', 'Geist', 'Inter', -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
      --font-size-lg: 1.3rem;
      --font-size-xl: 2rem;
      --font-size-xxl: 2.4rem;
      --shadow-soft: 0 2px 16px 0 rgba(255,182,193,0.25);
    }
    html, body {
      height: 100%;
      margin: 0;
      background: linear-gradient(to bottom, var(--color-bg-1), var(--color-bg-4) 100%);
      font-family: var(--romantic-font);
      color: var(--color-bg-3);
      min-height: 100vh;
    }
    body {
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      justify-content: flex-start;
      align-items: stretch;
    }
    .container {
      width: 100%;
      max-width: 450px;
      margin: 0 auto;
      padding: 0 10px 20px 10px;
      box-sizing: border-box;
    }
    .slides-section {
      min-height: 270px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-end;
      padding-top: 26px;
    }
    .carousel-wrapper {
      width: 100%;
      overflow: hidden;
      position: relative;
      margin-bottom: 22px;
    }
    .carousel {
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      scroll-behavior: smooth;
    }
    .carousel::-webkit-scrollbar {
      display: none;
    }
    .slide {
      flex: none;
      width: 100%;
      min-width: 100%;
      scroll-snap-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: var(--font-size-xl);
      font-weight: 600;
      color: var(--color-bg-2);
      background: var(--color-white);
      border-radius: 18px;
      margin: 0 6px;
      min-height: 145px;
      box-shadow: var(--shadow-soft);
      text-align: center;
      padding: 32px 16px 32px 16px;
      position: relative;
      transition: box-shadow 0.25s cubic-bezier(0.21,1,0.3,1);
      line-height: 1.35;
      letter-spacing: -0.01em;
      user-select: none;
    }
    .carousel-nav {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      margin-top: 13px;
      margin-bottom: 4px;
    }
    .carousel-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: none;
      background: var(--color-bg-2);
      opacity: 0.28;
      cursor: pointer;
      transition: opacity .15s cubic-bezier(.21,1,.3,1), box-shadow .18s;
    }
    .carousel-dot.active {
      opacity: 1;
      background: var(--color-bg-3);
      box-shadow: 0 0 0 3px var(--color-bg-1);
    }
    .carousel-arrow {
      background: var(--color-bg-2);
      border: none;
      color: var(--color-white);
      font-size: 1.22rem;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      margin: 0 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-soft);
      cursor: pointer;
      transition: background .12s, box-shadow .15s;
      opacity: 0.73;
    }
    .carousel-arrow:active { opacity: 1; background: var(--color-bg-3); }

    /* Romantic heart animation overlay */
    .hearts {
      position: fixed;
      pointer-events: none;
      top: 0; left: 0; width: 100vw; height: 100vh;
      z-index: 99;
      overflow: hidden;
    }
    .heart {
      position: absolute;
      width: 40px; height: 40px;
      opacity: 0.16;
      will-change: transform, opacity;
      pointer-events: none;
      transition: opacity 0.6s cubic-bezier(.21,1,.3,1);
      color: var(--color-bg-2);
      font-size: 2.2rem;
      animation: floatHeart 6s linear infinite;
    }
    @keyframes floatHeart {
      0% {
        transform: translateY(0) scale(1);
        opacity: 0.17;
      }
      75% {opacity: .23;}
      100% {
        transform: translateY(-120px) scale(1.17);
        opacity: 0;
      }
    }

    /* Photo & Music Section */
    .photo-and-music {
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: rgba(255,255,255,0.85);
      border-radius: 20px;
      padding: 30px 18px 26px 18px;
      box-shadow: 0 4px 24px 0 rgba(255,182,193,.12);
      max-width: 370px;
      margin-top: 18px;
      margin-bottom: 24px;
      position: relative;
    }
    .couple-photo {
      display: block;
      max-width: 220px;
      width: 90vw;
      aspect-ratio: 1/1;
      border-radius: 20px;
      margin: 0 auto 18px auto;
      box-shadow: 0 3px 18px 0 rgba(255,182,193,0.10);
      border: 4px solid var(--color-bg-4);
      object-fit: cover;
    }
    .audio-player {
      margin-top: 3px;
      display: flex;
      align-items: center;
      flex-direction: column;
      gap: 8px;
      width: 100%;
    }
    .play-btn {
      background: linear-gradient(90deg, var(--color-bg-1) 10%, var(--color-bg-3) 80%);
      color: var(--color-bg-2);
      border-radius: 200px;
      border: none;
      min-width: 98px;
      min-height: 46px;
      font-size: 1.20rem;
      font-weight: 600;
      padding: 12px 24px;
      box-shadow: var(--shadow-soft);
      cursor: pointer;
      margin: 0 auto 0 auto;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      transition: background 0.14s, box-shadow 0.18s, opacity 0.11s;
      letter-spacing: 0.03em;
    }
    .play-btn.playing {
      background: linear-gradient(90deg, var(--color-bg-3) 20%, var(--color-bg-2) 90%);
      color: var(--color-white);
      opacity: .88;
    }
    .play-btn:active {
      opacity: 1;
      box-shadow: 0 4px 12px 0 rgba(255,182,193,0.22);
    }
    @media (max-width: 430px) {
      .couple-photo {max-width: 90vw;}
    }
    @media (max-width: 370px) {
      .slides-section {min-height: 180px;}
      .slide {font-size: 1.12rem;padding:15px 8px;min-height:88px;}
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Floating Hearts -->
    <div class="hearts" aria-hidden="true"></div>
    <!-- Slides Section -->
    <section class="slides-section">
      <div class="carousel-wrapper">
        <button class="carousel-arrow" id="arrow-left" aria-label="Precedente" type="button" tabindex="0">‚üµ</button>
        <div class="carousel" id="carousel">
          <div class="slide">Mi dispiace tanto amore ... ü©µ</div>
          <div class="slide">So di essere stato sbadato e distratto...</div>
          <div class="slide">A volte sono davvero stupido, lo ammetto üòî</div>
          <div class="slide">Ma tu sei la cosa pi√π importante della mia vita</div>
          <div class="slide">Perdonami, ti amo ü©µ</div>
        </div>
        <button class="carousel-arrow" id="arrow-right" aria-label="Successivo" type="button" tabindex="0">‚ü∂</button>
      </div>
      <div class="carousel-nav" id="carousel-nav"></div>
    </section>
    <!-- Photo and Music Player Section -->
    <section class="photo-and-music">
      <img src="IMG_3057.jpg" alt="Noi due insieme" class="couple-photo" />
      <div class="audio-player">
        <button class="play-btn" id="play-btn" type="button">
          <span id="btn-icon">‚ñ∂Ô∏è</span> <span id="btn-label">Play</span>
        </button>
        <audio id="audio" src="Jovanotti - Come Musica (Videoclip).mp3"></audio>
      </div>
    </section>
  </div>
  <script>
    // Carousel logic
    const carousel = document.getElementById('carousel');
    const slides = carousel.querySelectorAll('.slide');
    const nav = document.getElementById('carousel-nav');
    const arrowLeft = document.getElementById('arrow-left');
    const arrowRight = document.getElementById('arrow-right');
    const slideCount = slides.length;
    let slideIndex = 0;
    // Build navigation dots
    function updateNavDots(idx) {
      nav.innerHTML = '';
      for (let i = 0; i < slideCount; i++) {
        const dot = document.createElement('button');
        dot.className = 'carousel-dot' + (i === idx ? ' active' : '');
        dot.type = 'button';
        dot.tabIndex = 0;
        dot.addEventListener('click', () => scrollToSlide(i));
        nav.appendChild(dot);
      }
    }
    function scrollToSlide(idx) {
      const width = carousel.offsetWidth;
      carousel.scrollTo({left: idx * width, behavior: 'smooth'});
    }
    function clampIdx(idx) {
      return Math.max(0, Math.min(slideCount - 1, idx));
    }
    let ticking = false;
    function handleScroll() {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          const width = carousel.offsetWidth;
          slideIndex = Math.round(carousel.scrollLeft / width);
          updateNavDots(slideIndex);
          ticking = false;
        });
        ticking = true;
      }
    }
    arrowLeft.addEventListener('click', () => {
      scrollToSlide(clampIdx(slideIndex - 1));
    });
    arrowRight.addEventListener('click', () => {
      scrollToSlide(clampIdx(slideIndex + 1));
    });
    carousel.addEventListener('scroll', handleScroll);
    window.addEventListener('resize', () => scrollToSlide(slideIndex));
    // Allow swipe on mobile: already supported via scrollable carousel
    // Keyboard navigation
    carousel.tabIndex = 0;
    carousel.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') scrollToSlide(clampIdx(slideIndex - 1));
      if (e.key === 'ArrowRight') scrollToSlide(clampIdx(slideIndex + 1));
    });
    // Initialize slide position + dots
    updateNavDots(0);
    scrollToSlide(0);
    // Enable snapping by touch
    let startX = 0;
    let scrollLeft = 0;
    carousel.addEventListener('touchstart', function(e){
      startX = e.touches[0].pageX;
      scrollLeft = carousel.scrollLeft;
    }, {passive:true});
    carousel.addEventListener('touchend', function(e){
      const width = carousel.offsetWidth;
      const idx = Math.round(carousel.scrollLeft / width);
      setTimeout(()=> scrollToSlide(idx), 80);
    }, {passive:true});
    // Audio player logic
    const playBtn = document.getElementById('play-btn');
    const btnIcon = document.getElementById('btn-icon');
    const btnLabel = document.getElementById('btn-label');
    const audio = document.getElementById('audio');
    let playing = false, firstPlay = true;
    playBtn.addEventListener('click', function(){
      if (!playing) {
        audio.play();
      } else {
        audio.pause();
      }
    });
    audio.addEventListener('play', function(){
      playing = true;
      playBtn.classList.add('playing');
      btnIcon.textContent = '‚è∏';
      btnLabel.textContent = 'Pausa';
    });
    audio.addEventListener('pause', function(){
      playing = false;
      playBtn.classList.remove('playing');
      btnIcon.textContent = '‚ñ∂Ô∏è';
      btnLabel.textContent = 'Play';
    });
    audio.addEventListener('ended', function(){
      playBtn.classList.remove('playing');
      btnIcon.textContent = '‚ñ∂Ô∏è';
      btnLabel.textContent = 'Play';
      playing = false;
    });
    // Pause song if navigating away or hidden
    document.addEventListener('visibilitychange', function() {
      if (document.hidden && !audio.paused) audio.pause();
    });
    // Floating heart animation
    const hearts = document.querySelector('.hearts');
    function randomBetween(a,b){return Math.random()*(b-a)+a;}
    function addHeart() {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.style.left = randomBetween(3,97)+'vw';
      heart.style.top = randomBetween(90,95)+'vh';
      heart.innerHTML = '‚ù§';
      heart.style.fontSize = randomBetween(1.6, 2.7)+'rem';
      heart.style.opacity = randomBetween(0.08, 0.20)+'';
      const dur = randomBetween(4,7);
      heart.style.animationDuration = dur+'s';
      hearts.appendChild(heart);
      setTimeout(()=>heart.remove(), dur*1000);
    }
    setInterval(addHeart, 1150);
    // Accessibility improvement for arrows
    arrowLeft.addEventListener('keydown',function(e){if(e.key==='Enter'){arrowLeft.click();}});
    arrowRight.addEventListener('keydown',function(e){if(e.key==='Enter'){arrowRight.click();}});
  </script>
</body>
</html>
